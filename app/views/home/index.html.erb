
  

    <div class="top-cont 
      container-fluid 
      row" 
      style=""
      >
      <div class='col-12 row d-flex mb-5'>

        <a href="<%= root_path%>" class="m-auto" >
          <%= image_tag("logo/gradient-logo-nobg-500x300.png", alt: "segura and company logo", class:"", id: "top-logo"
        )%>
        </a>    
      </div> 

      <div class="col-md-6
       d-flex
       " 
       style=""
       >
        <div class="" style="margin: auto;">
          <h1 class="top-section-title d-none"></h1>
          <h1 class=" text-break font-weight-bold
            text-muted mt-2 " >
            <small>Commercial</small> + <small>Residential </small>
          </h1>
          <h2 class="display text-uppercase
            text-break font-weight-bolder mt-2">Concrete Retaining Walls 
          </h2> 
          <button class="cta-schedule" >Schedule your project now</button>
        </div>
      </div>

      <div id='wall-img' class="col-md-6 d-flex 
        py-2 align-items-center" style="" >
        <%= image_tag("no-bg-elements/wall-side-nobg.png", alt: "poured concrete retaining wall illustration", id: 'wall-img-png', class: '',:style => "border-radius: 20px;margin: auto;") %>
      </div>
    
      <div class="round-card first" style="">
         <%= image_tag("no-bg-elements/concrete-wall.png", alt: "steel birchwood form", class: 'form-image',:style => "") %> <%= image_tag("no-bg-elements/concrete-wall.png", alt: "steel birchwood form", class: 'form-image right',:style => "") %>
          <span class="text" style="">
          <h3 class='card-title' style="">Rebar reinforced solid concrete walls</h3>
          <h6 class="card-subtitle">Has an ultimate flexural strength that is greater than block,  </h6>
          <h5>up to 30000 lbs of lateral resistance<h5>
          <h5 class="gray">1-4 weeks completion time depending on size</h5>
          <h5>Poured in one day</h5>
          <h5>Low maintainance </h5>
          <h5>Fire & Water Resistant  </h5>
          <h5> </h5>
          
          <button>
          More Info
          </button>
        </span>
      </div>
  
      <div class="round-card second" style="" >
        <%= image_tag("no-bg-elements/framework-basement-top-nobg.png",alt: "formed walls foundation, basement, house" , class:"form-image", :style => "") %>
        <span class="text" style="">
          <h3 class='card-title' style="">Medium and Large Projects </h3>
          <%# <h4 class="card-subtitle">Built with industry leading efficenty and performance</h4> %>
        <h5>Structural retaining walls<h4>
        <h5 class="gray">Basement concrete walls </h3>
        <h5 class="gray">Lake Seawalls </h3>
        <h5 class="gray">Residential and commercial retaining wall</h3>
        <button>
          See more
         </button>
        </span>
      </div>

      <div class="round-card third" style="" >
        <%= image_tag("no-bg-elements/cgi-red-forms-standing-nobg.png",alt: "finished poured concrete retaining wall" , class:"form-image", :style => "") %>
            <span class="text" style="">
          <h3 class='card-title' style="">Concrete Steel Forms</h3>
          <h4 class="card-subtitle">Industry Leading Performance </h4>
          <h6>
          Full 2”x2” crossmember support angle every foot for extra reinforcement.
          </h6>
          <h6>
          Allowable 1,000 psf load-rated system
          </h6>
            <h6>
          100% sealed birch plywood face prevents moisture absorption,
exhibiting greater strength than fir plywood.
          </h6>
          <%# <h6>
           Sealed Birch plywood face prevents moisture absorption, eliminates
grain transfer for a smooth finish after removal.
          </h6> %>
        <button>
          More Info
        </button>
        </span>
       
      </div>

      <div class="container" >
    
 
        <%# <!- Contact Form  %>
        <% if user_signed_in? %>
          <h3>Add a project using this project form </h3>
          <%= render 'shared/project'%>
        <% else %>
          <%# <h4 class="d-none"> Create a free account first or log in to create a project and get an estimate</h4> %>
          <%= render 'shared/sign_up_create'%>
          <br>
          <p>
            <%= link_to 'Register', new_user_registration_path %>  or <%= link_to 'Sign in', new_user_session_path %>
          </p>
        <% end %> 
      </div> <!-- end of col -->
           <!-- end of row -->
          <!-- end of container -->
          <!-- end of form -->
          <!-- end of contact -->

    </div>
  
      <%# end top container  %>
    <script>
  
      var skinnyDevice = window.matchMedia("(max-width: 600px)");
      var shortDevice = window.matchMedia("(max-height: 400px)");
      const logoSrcDesktop = "modern-blue-logos/modern-logo-nobg/modern-logo-full-shortname-bg-nobg.png"

      const logoSrcMobile = "modern-blue-logos/modern-logo-nobg/modern-logo-name-short-bg-nobg-250x200.png"
      var responsiveLogo = skinnyDevice.matches? logoSrcMobile : logoSrcDesktop; 

        // handleDeviceChange(smallDevice);
        // load page image static, schroll till img is 30% from top.
        // cat 30% get img position from top and right 
        // change position to fixed and set position.
        // at scroll 400 change background img. 
        // at 800 change to static and set position. 
        
      const imgEl = document.getElementById("wall-img-png");
   
      var imgCont = document.getElementById("wall-img");
      console.log(imgCont)
      console.log('imgCont logged');
      var imgContParent = imgCont.parentNode;
      console.log(imgContParent);    
      const imgWallFront = "assets/no-bg-elements/wall-front-nobg.png"
      var imgWallFrontFull = 'assets/no-bg-elements/wall-front-full-nobg.png';
      const imgWallAngleFront = 'assets/images/no-bg-elements/wall-front-angle-nobg.png';
      const imgWallLabeled = 'assets/no-bg-elements/wall-labeled-nobg.png';
      const imgWallSide = 'assets/no-bg-elements/wall-side-nobg.png';
      const imgWallSideTop = 'assets/images/no-bg-elements/wall-side-top-nobg.png.png';
      const imgWallBackDirtLeft = 'assets/images/no-bg-elements/wall-rear-left-dirt-nobg.png';
      const imgWallBackDirtRight ='assets/images/no-bg-elements/wall-rear-right-dirt-nobg.png';
      const imgWallBackRight = 
      'assets/images/no-bg-elements/wall-rear-right-nobg.png';

      function getElPos() {
        var contPos = imgCont.getBoundingClientRect();
        return contPos
       }
      window.onscroll = function()  {
        stickyScroll()
       };

      var changedImage = false; 
      var flippedImage = false;

      function stickyScroll() {

        var {x, y, top, right, bottom, left, width, height  } = getElPos();
        var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
        // var elContY = imgCont.offsetTop;
        console.log('scrollTop');
        console.log(scrollTop)
        console.log('logged scrollTop');
        
        if ( skinnyDevice.matches? scrollTop < 50 : scrollTop < 50 ) {
          console.log('scrollTop > 50');
          // imgCont.style.position = 'static';
          console.log(changedImage);
          if (changedImage == true) {
            console.log('changing image below-----------');
            console.log(changedImage)
            imgEl.src = imgWallSide;
            changedImage = false; 
            console.log(changedImage)
            setTimeout(function(){
              imgEl.classList.remove('flipped');
              flippedImage = false;
            }, 1000);  
          }
        }
        
        if ( skinnyDevice.matches? scrollTop > 100 : scrollTop > 100 ){
          console.log(x, y);
          console.log(width, height);
          console.log('scrollTop > 100');
          imgEl.src = 'assets/no-bg-elements/wall-front-angle-nobg.png';
          changedImage = true;
        }
        if (skinnyDevice.matches? scrollTop > 200 : scrollTop > 150){
          console.log('psition > 200/150');
          imgEl.src = imgWallFront;
          console.log(imgEl.src);
        }
        if (skinnyDevice.matches? scrollTop > 300 : scrollTop > 200 ) {
          if (flippedImage && !imgEl.classList.contains('flipped')) {
            imgEl.classList.add('flipped');
          }
          console.log('scrollposition > 300/200') ;
          imgEl.src = imgWallFrontFull;
          console.log(imgEl.src);
        }
        if (skinnyDevice.matches? scrollTop > 350 : scrollTop > 250) {
        console.log('changing position to static after 350/250 scrolltop')
            if (imgEl.classList.contains('flipped')) {
              imgEl.classList.remove('flipped');
            }
            imgEl.src = imgWallLabeled;
            imgEl.style.width = 
            console.log(imgEl.src);
        }
        if (skinnyDevice.matches? scrollTop > 400 : scrollTop > 300) {
          flippedImage = true;
        }
      }
  </script>